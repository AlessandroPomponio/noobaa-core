<div class="row content-middle push-next">
    <h3 class="heading3 push-next greedy">
        Part count for this file:
        <span data-bind="text: count"></span>
    </h3>

    <a class="btn push-next" download data-bind="attr: { href: s3SignedUrl }" >
        Download File
    </a>

    <button class="btn" data-bind="click: () => showPreviewModal()">
        Preview File
    </button>
</div>

<ul class="part-list greedy" data-bind="foreach: rows">
    <li>
        <div class="row content-middle" data-bind="click: toggleExpend">
            <svg-icon class="push-next" params="name: stateIcon" data-bind="
                tooltip: stateTooltip
            "></svg-icon>

            <div class="greedy">
                <span data-bind="text: name"></span>
                (<span class="emphasized" data-bind="text: size"></span>)
            </div>

            <button class="expand-btn btn-flat rotate no-outline" data-bind="
                css: { 'deg-90': !isExpended() }
            ">
                <svg-icon class="expand-icon icon-small" params="
                    name: 'chevron'
                "></svg-icon>
            </button>
        </div>

        <table data-bind="expand: isExpended">
            <tbody data-bind="foreach: blocks">
                <tr content-middle">
                    <td class="status-col">
                        <svg-icon class="icon-small"
                            params="name: nodeStateIcon"
                            data-bind="tooltip: nodeStateTooltip">
                        </svg-icon>
                    </td>

                    <td class="replica-col text-left" data-bind="text: label">
                    </td>

                    <td class="node-name-col" >
                        <a class="link" data-bind="
                            text: shortenNodeName,
                            tooltip: nodeName,
                            href: {
                                route: 'node',
                                params: {
                                    pool: poolName,
                                    node: nodeName,
                                    tab: null
                                }
                            }
                        "></a>
                    </td>

                    <td class="node-ip-col">
                        <a class="link" data-bind="
                            text: nodeIp,
                            href: {
                                route: 'node',
                                params: {
                                    pool: poolName,
                                    node: nodeName,
                                    tab: null
                                }
                            }
                        "></a>
                    </td>

                    <td class="pool-col no-wrap">
                        <a class="link" data-bind="
                            text: poolName,
                            tooltip: poolName,
                            href: {
                                route: 'pool',
                                params: {
                                    pool: poolName,
                                    tab: null
                                }
                            }
                        "></a>
                    </td>
                </tr>
            </tbody>
        </table>
    </li>
</ul>

<paginator class="align-end push-prev" params="
    page: page, itemCount: count, pageSize: pageSize
"></paginator>

<!-- ko if: isPreviewModalVisible -->
<object-preview-modal params="
    onClose: () => hidePreviewModal(),
    uri: s3SignedUrl
"></object-preview-modal>
<!-- /ko -->
