<div ng-controller="TierViewCtrl" ng-init="tier_tab='stats'">
    <div class="container">

        <div class="Xpage-header">

            <h1 class="capitalize">
                <span ng-switch="tier.kind" class="text-muted">
                    <i ng-switch-when="edge" class="fa fa-spinner fa-lg"></i>
                    <i ng-switch-when="cloud" class="fa fa-cube fa-lg"></i>
                </span>
                {{tier.name}}
                <!-- <span class="text-muted">Tier</span> -->
            </h1>

            <ol class="breadcrumb capitalize" style="margin: 30px 0">
                <li>
                    <a href="/console/">Home</a>
                </li>
                <li>
                    <a href="/console/tier/">Tiers List</a>
                </li>
                <li class="active">{{tier.name}}</li>
            </ol>

        </div>

        <table class="table table-minimal-borders table-center">
            <tr class="text-center">
                <th>Tier Status</th>
                <th>Nodes</th>
                <th>Net Storage</th>
                <th>Raw Storage</th>
            </tr>
            <tr>
                <td><i class="fa fa-check fa-lg"></i> Healthy</td>
                <td>{{tier.nodes.online}}</td>
                <td>{{human_size(tier.storage.used/3)}} of {{human_size(tier.storage.alloc/3)}}</td>
                <td>{{human_size(tier.storage.used)}} of {{human_size(tier.storage.alloc)}}</td>
            </tr>
        </table>


        <div class="well" ng-switch="tier_tab" style="margin: 30px 0 0 0">

            <ul class="nav nav-pills noselect" style="margin: 0 0 15px 0">
                <li ng-class="{active: tier_tab=='stats'}">
                    <a ng-click="tier_tab='stats'">Statistics</a>
                </li>
                <li ng-class="{active: tier_tab=='settings'}">
                    <a ng-click="tier_tab='settings'">Settings</a>
                </li>
                <li ng-class="{active:tier_tab=='nodes'}">
                    <a ng-click="tier_tab='nodes'">Nodes</a>
                </li>
            </ul>

            <div ng-switch-when="stats">
                <i>placeholder for statistics ...</i>
            </div>

            <div ng-switch-when="nodes">
                <input type="text" class="form-control floating-label" placeholder="Search Node" ng-model="nodes_query.search" ng-model-options="{debounce: 700}" ng-change="refresh_nodes()" />
                <div class="table-responsive">
                    <table class="table" ng-init="refresh_nodes()">
                        <tr>
                            <th></th>
                            <th>Node Name</th>
                            <th>Raw Storage</th>
                            <th>Status</th>
                        </tr>
                        <tr ng-repeat="node in nodes">
                            <td class="checkbox noselect" style="width: 1px; padding: 4px">
                                <label>
                                    <input type="checkbox" />
                                </label>
                            </td>
                            <td class="table-btn text-left">
                                <a ng-href="tier/{{tier.name}}/{{node.name}}" class="btn btn-primary btn-flat btn-block capitalize">
                                {{node.name}}
                            </a>
                            </td>
                            <td>{{human_size(node.storage.used)}} of {{human_size(node.storage.alloc)}}</td>
                            <td>Healthy</td>
                        </tr>
                    </table>
                </div>
                <nav class="noselect">
                    <ul class="pagination">
                        <li>
                            <a nb-click-ladda="goto_nodes_page(nodes_active_page-1)">&laquo;</a>
                        </li>
                        <li ng-repeat="page in nodes_pages" ng-class="{active:page==nodes_active_page}">
                            <a nb-click-ladda="goto_nodes_page(page)">{{page+1}}</a>
                        </li>
                        <li>
                            <a nb-click-ladda="goto_nodes_page(nodes_active_page+1)">&raquo;</a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div ng-switch-when="settings">
                <table class="table table-no-borders" style="width: auto">
                    <tr>
                        <th>Tier Name:</th>
                        <td class="capitalize">{{tier.name}}</td>
                        <td class="table-btn">
                            <button class="btn btn-primary btn-flat btn-sm">Change</button>
                        </td>
                    </tr>
                </table>
            </div>

        </div>

    </div>
</div>
